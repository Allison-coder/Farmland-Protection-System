import{r as i,y as L,f as q,E as H,z as R,A as G,a as K,b as Q,d as W,B as X,e as Y,g as Z,j as h,k as ll,l as el,m as al,o as ol,n as tl,w as o,p as l,q as p,v as x}from"./index.e60cff6b.js";/* empty css                *//* empty css                   *//* empty css                     */import{u as C,w as nl}from"./xlsx.1b6e496d.js";/* empty css                  */import{h as y}from"./http.5113bb0c.js";/* empty css                        */const ul={slot:"footer",class:"dialog-footer"},dl={slot:"footer",class:"dialog-footer"},_l={__name:"data",setup(rl){const _=i([]),f=i(!1),V=i(!1),b=i(""),U=i(0),g=i(1),c=i(10),u=i({name:"",areaCode:"",county:"",city:"",province:"",slope:"",ph:"",organicMatter:"",fertility:"",farmlandArea:"",coordinates:""}),t=i({id:"",name:"",areaCode:"",county:"",city:"",province:"",slope:"",ph:"",organicMatter:"",fertility:"",farmlandArea:"",coordinates:""}),v=async()=>{const s=await y.get("/searchfarmland",{params:{page:g.value,limit:c.value,name:b.value}});s.data.code===0&&(_.value=s.data.data,U.value=s.data.total)},M=async()=>{const s={type:"Polygon",coordinates:JSON.parse(u.value.coordinates)},e=await y.post("/addfarmland",{...u.value,geom:s});e.data.code===0?(f.value=!1,v()):alert(e.data.msg)},A=s=>{t.value={...s,coordinates:JSON.stringify(s.geom.coordinates)},V.value=!0},F=async()=>{const s={type:"Polygon",coordinates:JSON.parse(t.value.coordinates)},e=await y.post("/editfarmland",{...t.value,geom:s});e.data.code===0?(V.value=!1,v()):alert(e.data.msg)},z=async s=>{const e=await y.post("/delfarmland",{id:s.id});e.data.code===0?v():alert(e.data.msg)},S=s=>{c.value=s,v()},N=s=>{g.value=s,v()},B=()=>{const s=_.value.map(r=>({ID:r.id,\u540D\u79F0:r.name,\u533A\u5212\u7801:r.areaCode,\u53BF\u7EA7:r.county,\u5730\u7EA7:r.city,\u7701\u7EA7:r.province,\u5761\u5EA6:r.slope,\u9178\u78B1\u5EA6:r.ph,\u6709\u673A\u8D28:r.organicMatter,\u5730\u529B:r.fertility,\u8015\u5730\u9762\u79EF:r.farmlandArea})),e=C.json_to_sheet(s),n=C.book_new();C.book_append_sheet(n,e,"Farmland"),nl(n,"farmland.xlsx")};return L(()=>{v()}),(s,e)=>{const n=q,r=H,k=R,$=G,I=K,m=Q,P=W,j=X,D=Y,d=Z,E=h,w=ll,J=el,O=al;return ol(),tl(O,null,{default:o(()=>[l(J,null,{default:o(()=>[l(I,null,{default:o(()=>[l($,null,{default:o(()=>[l(k,{span:12},{default:o(()=>[p(" \u641C\u7D22\uFF1A "),l(n,{style:{width:"300px"},modelValue:b.value,"onUpdate:modelValue":e[0]||(e[0]=a=>b.value=a),placeholder:"\u8BF7\u8F93\u5165\u884C\u653F\u533A\u57DF\u540D\u79F0",clearable:""},null,8,["modelValue"]),p(" \u2003 "),l(r,{type:"primary",onClick:v},{default:o(()=>[p("\u641C\u7D22")]),_:1})]),_:1}),l(k,{span:12,style:{"text-align":"right"}},{default:o(()=>[l(r,{type:"primary",onClick:e[1]||(e[1]=a=>f.value=!0)},{default:o(()=>[p("\u65B0\u589E\u8015\u5730")]),_:1}),l(r,{type:"primary",onClick:B},{default:o(()=>[p("\u5BFC\u51FAExcel")]),_:1})]),_:1})]),_:1})]),_:1}),l(D,null,{default:o(()=>[l(P,{data:_.value,style:{width:"100%"}},{default:o(()=>[l(m,{prop:"id",label:"ID"}),l(m,{prop:"name",label:"\u540D\u79F0"}),l(m,{prop:"areaCode",label:"\u533A\u5212\u7801"}),l(m,{prop:"county",label:"\u53BF\u7EA7"}),l(m,{prop:"city",label:"\u5730\u7EA7"}),l(m,{prop:"province",label:"\u7701\u7EA7"}),l(m,{prop:"slope",label:"\u5761\u5EA6"}),l(m,{prop:"ph",label:"\u9178\u78B1\u5EA6"}),l(m,{prop:"organicMatter",label:"\u6709\u673A\u8D28"}),l(m,{prop:"fertility",label:"\u5730\u529B"}),l(m,{prop:"farmlandArea",label:"\u8015\u5730\u9762\u79EF"}),l(m,{label:"\u64CD\u4F5C"},{default:o(({row:a})=>[l(r,{type:"text",onClick:T=>A(a)},{default:o(()=>[p("\u7F16\u8F91")]),_:2},1032,["onClick"]),l(r,{type:"text",onClick:T=>z(a)},{default:o(()=>[p("\u5220\u9664")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(j,{onSizeChange:S,onCurrentChange:N,"current-page":g.value,"page-sizes":[5,10,20,50],"page-size":c.value,layout:"total, sizes, prev, pager, next, jumper",total:U.value},null,8,["current-page","page-size","total"])]),_:1}),l(w,{title:"\u65B0\u589E\u8015\u5730",modelValue:f.value,"onUpdate:modelValue":e[14]||(e[14]=a=>f.value=a)},{default:o(()=>[l(E,{model:u.value},{default:o(()=>[l(d,{label:"\u540D\u79F0"},{default:o(()=>[l(n,{modelValue:u.value.name,"onUpdate:modelValue":e[2]||(e[2]=a=>u.value.name=a)},null,8,["modelValue"])]),_:1}),l(d,{label:"\u533A\u5212\u7801"},{default:o(()=>[l(n,{modelValue:u.value.areaCode,"onUpdate:modelValue":e[3]||(e[3]=a=>u.value.areaCode=a)},null,8,["modelValue"])]),_:1}),l(d,{label:"\u53BF\u7EA7"},{default:o(()=>[l(n,{modelValue:u.value.county,"onUpdate:modelValue":e[4]||(e[4]=a=>u.value.county=a)},null,8,["modelValue"])]),_:1}),l(d,{label:"\u5730\u7EA7"},{default:o(()=>[l(n,{modelValue:u.value.city,"onUpdate:modelValue":e[5]||(e[5]=a=>u.value.city=a)},null,8,["modelValue"])]),_:1}),l(d,{label:"\u7701\u7EA7"},{default:o(()=>[l(n,{modelValue:u.value.province,"onUpdate:modelValue":e[6]||(e[6]=a=>u.value.province=a)},null,8,["modelValue"])]),_:1}),l(d,{label:"\u5761\u5EA6"},{default:o(()=>[l(n,{modelValue:u.value.slope,"onUpdate:modelValue":e[7]||(e[7]=a=>u.value.slope=a)},null,8,["modelValue"])]),_:1}),l(d,{label:"\u9178\u78B1\u5EA6"},{default:o(()=>[l(n,{modelValue:u.value.ph,"onUpdate:modelValue":e[8]||(e[8]=a=>u.value.ph=a)},null,8,["modelValue"])]),_:1}),l(d,{label:"\u6709\u673A\u8D28"},{default:o(()=>[l(n,{modelValue:u.value.organicMatter,"onUpdate:modelValue":e[9]||(e[9]=a=>u.value.organicMatter=a)},null,8,["modelValue"])]),_:1}),l(d,{label:"\u5730\u529B"},{default:o(()=>[l(n,{modelValue:u.value.fertility,"onUpdate:modelValue":e[10]||(e[10]=a=>u.value.fertility=a)},null,8,["modelValue"])]),_:1}),l(d,{label:"\u8015\u5730\u9762\u79EF"},{default:o(()=>[l(n,{modelValue:u.value.farmlandArea,"onUpdate:modelValue":e[11]||(e[11]=a=>u.value.farmlandArea=a)},null,8,["modelValue"])]),_:1}),l(d,{label:"\u5750\u6807"},{default:o(()=>[l(n,{modelValue:u.value.coordinates,"onUpdate:modelValue":e[12]||(e[12]=a=>u.value.coordinates=a),placeholder:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),x("div",ul,[l(r,{onClick:e[13]||(e[13]=a=>f.value=!1)},{default:o(()=>[p("\u53D6\u6D88")]),_:1}),l(r,{type:"primary",onClick:M},{default:o(()=>[p("\u786E\u5B9A")]),_:1})])]),_:1},8,["modelValue"]),l(w,{title:"\u7F16\u8F91\u8015\u5730",modelValue:V.value,"onUpdate:modelValue":e[27]||(e[27]=a=>V.value=a)},{default:o(()=>[l(E,{model:t.value},{default:o(()=>[l(d,{label:"\u540D\u79F0"},{default:o(()=>[l(n,{modelValue:t.value.name,"onUpdate:modelValue":e[15]||(e[15]=a=>t.value.name=a)},null,8,["modelValue"])]),_:1}),l(d,{label:"\u533A\u5212\u7801"},{default:o(()=>[l(n,{modelValue:t.value.areaCode,"onUpdate:modelValue":e[16]||(e[16]=a=>t.value.areaCode=a)},null,8,["modelValue"])]),_:1}),l(d,{label:"\u53BF\u7EA7"},{default:o(()=>[l(n,{modelValue:t.value.county,"onUpdate:modelValue":e[17]||(e[17]=a=>t.value.county=a)},null,8,["modelValue"])]),_:1}),l(d,{label:"\u5730\u7EA7"},{default:o(()=>[l(n,{modelValue:t.value.city,"onUpdate:modelValue":e[18]||(e[18]=a=>t.value.city=a)},null,8,["modelValue"])]),_:1}),l(d,{label:"\u7701\u7EA7"},{default:o(()=>[l(n,{modelValue:t.value.province,"onUpdate:modelValue":e[19]||(e[19]=a=>t.value.province=a)},null,8,["modelValue"])]),_:1}),l(d,{label:"\u5761\u5EA6"},{default:o(()=>[l(n,{modelValue:t.value.slope,"onUpdate:modelValue":e[20]||(e[20]=a=>t.value.slope=a)},null,8,["modelValue"])]),_:1}),l(d,{label:"\u9178\u78B1\u5EA6"},{default:o(()=>[l(n,{modelValue:t.value.ph,"onUpdate:modelValue":e[21]||(e[21]=a=>t.value.ph=a)},null,8,["modelValue"])]),_:1}),l(d,{label:"\u6709\u673A\u8D28"},{default:o(()=>[l(n,{modelValue:t.value.organicMatter,"onUpdate:modelValue":e[22]||(e[22]=a=>t.value.organicMatter=a)},null,8,["modelValue"])]),_:1}),l(d,{label:"\u5730\u529B"},{default:o(()=>[l(n,{modelValue:t.value.fertility,"onUpdate:modelValue":e[23]||(e[23]=a=>t.value.fertility=a)},null,8,["modelValue"])]),_:1}),l(d,{label:"\u8015\u5730\u9762\u79EF"},{default:o(()=>[l(n,{modelValue:t.value.farmlandArea,"onUpdate:modelValue":e[24]||(e[24]=a=>t.value.farmlandArea=a)},null,8,["modelValue"])]),_:1}),l(d,{label:"\u5750\u6807"},{default:o(()=>[l(n,{modelValue:t.value.coordinates,"onUpdate:modelValue":e[25]||(e[25]=a=>t.value.coordinates=a),placeholder:"\u683C\u5F0F\uFF1A[x, y]"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),x("div",dl,[l(r,{onClick:e[26]||(e[26]=a=>V.value=!1)},{default:o(()=>[p("\u53D6\u6D88")]),_:1}),l(r,{type:"primary",onClick:F},{default:o(()=>[p("\u786E\u5B9A")]),_:1})])]),_:1},8,["modelValue"])]),_:1})]),_:1})}}};export{_l as default};
