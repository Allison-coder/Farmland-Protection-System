import{r as g,o as F,n as x,w as l,p as a,q as w,C as D,f as E,g as k,h,i as N,E as B,j as C,D as m,G as $,H as q,I as K,J as M,t as P,v as V,K as y,L as T,k as O,M as j,N as G,O as H,P as J,_ as L}from"./index.e60cff6b.js";/* empty css                     *//* empty css                  *//* empty css                   */import{h as I}from"./http.5113bb0c.js";const R={__name:"register",setup(c){const e=g({username:"",password:"",name:"",gender:"",phone:"",remark:"",type:0}),u=g(""),f=async()=>{if(!e.value.name||!e.value.username||!e.value.password||!u.value||!e.value.gender||!e.value.phone){m.error("\u6240\u6709\u5B57\u6BB5\u5747\u4E3A\u5FC5\u586B\u9879");return}if(e.value.password!==u.value){m.error("\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u4E00\u81F4");return}try{const i=await I.post("/add",e.value);i.data.code===0?(m.success("\u6CE8\u518C\u6210\u529F"),e.value.username="",e.value.password="",e.value.name="",e.value.gender="",e.value.phone="",e.value.remark="",u.value=""):m.error(i.data.msg)}catch{m.error("\u6CE8\u518C\u5931\u8D25")}};return(i,o)=>{const r=E,n=k,_=h,t=N,d=B,v=C;return F(),x(v,{model:e.value,onSubmit:D(f,["prevent"])},{default:l(()=>[a(n,{label:"\u59D3\u540D",prop:"name"},{default:l(()=>[a(r,{modelValue:e.value.name,"onUpdate:modelValue":o[0]||(o[0]=s=>e.value.name=s)},null,8,["modelValue"])]),_:1}),a(n,{label:"\u7528\u6237\u540D",prop:"username"},{default:l(()=>[a(r,{modelValue:e.value.username,"onUpdate:modelValue":o[1]||(o[1]=s=>e.value.username=s)},null,8,["modelValue"])]),_:1}),a(n,{label:"\u5BC6\u7801",prop:"password"},{default:l(()=>[a(r,{type:"password",modelValue:e.value.password,"onUpdate:modelValue":o[2]||(o[2]=s=>e.value.password=s)},null,8,["modelValue"])]),_:1}),a(n,{label:"\u786E\u8BA4\u5BC6\u7801",prop:"confirmPassword"},{default:l(()=>[a(r,{type:"password",modelValue:u.value,"onUpdate:modelValue":o[3]||(o[3]=s=>u.value=s)},null,8,["modelValue"])]),_:1}),a(n,{label:"\u6027\u522B",prop:"gender"},{default:l(()=>[a(t,{modelValue:e.value.gender,"onUpdate:modelValue":o[4]||(o[4]=s=>e.value.gender=s),placeholder:"\u8BF7\u9009\u62E9\u6027\u522B"},{default:l(()=>[a(_,{label:"\u7537",value:"\u7537"}),a(_,{label:"\u5973",value:"\u5973"})]),_:1},8,["modelValue"])]),_:1}),a(n,{label:"\u7535\u8BDD",prop:"phone"},{default:l(()=>[a(r,{modelValue:e.value.phone,"onUpdate:modelValue":o[5]||(o[5]=s=>e.value.phone=s)},null,8,["modelValue"])]),_:1}),a(n,{label:"\u5907\u6CE8",prop:"remark"},{default:l(()=>[a(r,{modelValue:e.value.remark,"onUpdate:modelValue":o[6]||(o[6]=s=>e.value.remark=s)},null,8,["modelValue"])]),_:1}),a(n,null,{default:l(()=>[a(d,{type:"primary","native-type":"submit"},{default:l(()=>[w("\u6CE8\u518C")]),_:1})]),_:1})]),_:1},8,["model","onSubmit"])}}},S=c=>(H("data-v-70a67f41"),c=c(),J(),c),z={class:"login-wrap"},A={class:"ms-login"},Q=S(()=>V("div",{class:"ms-title"},"\u5E7F\u4E1C\u7701\u8015\u5730\u4FE1\u606F\u7CFB\u7EDF",-1)),W={class:"login-btn"},X=S(()=>V("br",null,null,-1)),Y=$({__name:"login",setup(c){const e=q(),u=K({username:"admin",password:"123123"}),f=g(!1),i={username:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",trigger:"blur"}],password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur"}]},o=g(),r=_=>{!_||_.validate(t=>{if(t)I.post("/login",u).then(d=>{d.data.code===0?(m.success("\u767B\u5F55\u6210\u529F"),localStorage.setItem("ms_username",u.username),d.data.data.type==1?(localStorage.setItem("ms_type","1"),localStorage.setItem("ms_id",d.data.data.id),e.push("/people")):(localStorage.setItem("ms_type","0"),localStorage.setItem("ms_id",d.data.data.id),e.push("/map"))):m.error("\u767B\u5F55\u5931\u8D25")});else return m.error("\u767B\u5F55\u6210\u529F"),!1})};return M().clearTags(),(_,t)=>{const d=O,v=B,s=E,b=k,U=C;return F(),P("div",z,[a(d,{title:"\u6CE8\u518C",modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=p=>f.value=p),width:"30%"},{default:l(()=>[a(R)]),_:1},8,["modelValue"]),V("div",A,[Q,a(U,{model:u,rules:i,ref_key:"login",ref:o,"label-width":"0px",class:"ms-content"},{default:l(()=>[a(b,{prop:"username"},{default:l(()=>[a(s,{modelValue:u.username,"onUpdate:modelValue":t[1]||(t[1]=p=>u.username=p),placeholder:"username"},{prepend:l(()=>[a(v,{icon:y(j)},null,8,["icon"])]),_:1},8,["modelValue"])]),_:1}),a(b,{prop:"password"},{default:l(()=>[a(s,{type:"password",placeholder:"password",modelValue:u.password,"onUpdate:modelValue":t[2]||(t[2]=p=>u.password=p),onKeyup:t[3]||(t[3]=T(p=>r(o.value),["enter"]))},{prepend:l(()=>[a(v,{icon:y(G)},null,8,["icon"])]),_:1},8,["modelValue"])]),_:1}),V("div",W,[a(v,{type:"primary",onClick:t[4]||(t[4]=p=>r(o.value))},{default:l(()=>[w("\u767B\u5F55")]),_:1}),X,a(v,{type:"success",onClick:t[5]||(t[5]=p=>f.value=!0)},{default:l(()=>[w("\u6CE8\u518C")]),_:1})])]),_:1},8,["model"])])])}}});const te=L(Y,[["__scopeId","data-v-70a67f41"]]);export{te as default};
